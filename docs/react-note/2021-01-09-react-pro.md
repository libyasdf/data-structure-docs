# webpack

编译阶段：

alies

import 'bootstrap'

const bootstrap  = path.reslov('/node_omdele/bootstarp/dsd.css')
alies : {
bootstrap
}


1. 启用缓存 webpack5
cache: {
    type:'memory'
}

打包之后：

deterministic

# 路由切换优化

## 路由懒加载

路由的分割

懒加载是直接将组建单独打包成一个分片    然后路由切换的时候去动态加载这个切片

模板注释perfetch perload

/* webpackPrefetch: true */


# 更新阶段优化

pureComponent React.memo /浅比较  props 和state

使用高阶组件实现memo导致ref丢失：解决使用React.forwardRef()


Object.is()

解决浅比较问题：

import {is,Map} from 'immutable'

# 可视化工具
react dev tool :profiler / flamegraph 
## reselect

优化redux

```
import {createStore} from 'redux'
import {createSelector} from 'reselect'

最新版的react-router-dom 库和这个一样
useSelector

```

# 大数据渲染
## 时间分片

```javascript
let count = 0;

this.timeSlice(500)

timeSlice = (times) =>{
    // 浏览器执行渲染钱执行 每一帧都渲染
    requestAnimationFrame(()=>{        
        let minus = times > 100 ? 100 : times
        this.setState({
            List: [...this.state.list, new Array(100).fill(item => count++)]
        },()=>{
            times-=minus;
            this.timeSlice(times)
        })
    })
}
```

可以换成`requestIdleCallback` 浏览器空闲执行 不阻塞优先级高的


react异步渲染难产，现在还是同步的


## 虚拟列表

concurrent模式

# 瀑布流 - 图片懒加载

React Hook